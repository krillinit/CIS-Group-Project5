<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <link rel="stylesheet" href="Phase6.css">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

    </head>
    <body>
    <header>
        <!--#8-->
        <nav class="navbar-nav navbar-expand-md navbar-light bg-black sticky-top">

            <a class="navbar-brand" href="#">
                <img src="https://s3-us-west-2.amazonaws.com/phase4assignment/Lakers-icon.png" width="100" height="100" class="d-inline-block align-top" alt="">
                <p class="align-top text-warning font-weight-bold"> Los Angeles Lakers </p>
            </a>




            <button class="navbar-toggler" data-toggle="collapse" data-target="#collapse_target">
                <span class="navbar-toggler-icon"><span>
            </button>
            <div class="collapse navbar-collapse" id="collapse_target">
                <span class="navbar-text"> CIS 3110</span>

                <ul class="navbar-nav">
                    <li class="nav-item"> <a class="nav-link" href="https://s3-us-west-2.amazonaws.com/finalphase/Home.html">Home</a> </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" data-target="dropdown_target">Site Directory<span class="caret"></span></a>
                        <!--#1-->
                        <div class="dropdown-menu" aria-labelledby="dropdown_target">
                            <a class="dropdown-item" href="https://s3-us-west-2.amazonaws.com/finalphase/LastPhaseAbout.html">About Us</a>
                            <a class="dropdown-item" href="https://s3-us-west-2.amazonaws.com/finalphase/LastPhaseContact.html">Contact Us</a>
                            <a class="dropdown-item" href="https://s3-us-west-2.amazonaws.com/finalphase/PrivacyPolicy.html">Privacy Policy</a>
                            <a class="dropdown-item" href="https://s3-us-west-2.amazonaws.com/finalphase/TermsofUse.html">Terms of Use</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" data-target="dropdown_target">Products<span class="caret"></span></a>
                        <div class="dropdown-menu" aria-labelledby="dropdown_target">
                            <a class="dropdown-item" href="https://s3-us-west-2.amazonaws.com/finalphase/hatslakers.html">Hats</a>
                            <a class="dropdown-item" href="https://s3-us-west-2.amazonaws.com/finalphase/Jerseys.html">Jerseys</a>
                            <a class="dropdown-item" href="https://s3-us-west-2.amazonaws.com/finalphase/Shoes.html">Shoes</a>
                            <a class="dropdown-item" href="https://s3-us-west-2.amazonaws.com/finalphase/Misc.html">Misc</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" data-target="dropdown_target">Profile<span class="caret"></span></a>
                        <div class="dropdown-menu" aria-labelledby="dropdown_target">
                            <a class="dropdown-item" href="https://s3-us-west-2.amazonaws.com/finalphase/profile.html">Profile</a>
                            <a class="dropdown-item" href="https://s3-us-west-2.amazonaws.com/finalphase/create.html">Create a Profile</a>
                            <a class="dropdown-item" href="https://s3-us-west-2.amazonaws.com/finalphase/edit.html">Profile Maintenance</a>
                            <a class="dropdown-item" href="https://s3-us-west-2.amazonaws.com/finalphase/LogIn.html">Login</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" data-target="dropdown_target">Team<span class="caret"></span></a>
                        <div class="dropdown-menu" aria-labelledby="dropdown_target">
                            <a class="dropdown-item" href="https://s3-us-west-2.amazonaws.com/finalphase/Roster.html">Roster Page</a>
                            <a class="dropdown-item" href="https://s3-us-west-2.amazonaws.com/finalphase/Schedule.html">Schedules</a>
                            <a class="dropdown-item" href="https://s3-us-west-2.amazonaws.com/finalphase/KBvLJ.html">KB vs LJ</a>
                        </div>
                    </li>
                </ul>
            </div>



            <form class="form-inline my-2 my-lg-0">
                <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-warning my-2 my-sm-0 " type="submit">Search</button>
            </form>

        </nav>
    </header>
    <script>
        var images = ["Tie.jpeg", "Cufflinks.jpeg", "BlackWatch.jpeg","GoldWatch.jpeg", "Keychain.jpeg","GamingChair.jpeg"];

        var caption = ["Woven Checkered Tie - $18.74", "Lakers Logo Cufflinks - $48.74","Tissot Black Stainless Steel Chronograph - $350","Tissot Yellow Quickster Quartz Chronograph - $197.50","LeBron James Gold Player Jersey Keychain - $5.24","Los Angeles Lakers NBA Gaming Chair 100 - $149.99"];

        var description = ["Keep it classy and show off a little home team pride with this one-of-a-kind Los Angeles Lakers Checkered tie!",
                           "Looking for a perfect accent piece to polish off your business look? These expertly crafted Los Angeles Lakers cufflinks are perfect for showing off your vehement fandom.",
                            "As the official timekeeper for the NBA, Tissot presents this Stainless Steel Chronograph XL with a Los Angeles Lakers case back.",
                            "Keep your loyalty to the Los Angeles Lakers and your appreciation for LeBron James with you everywhere you go with this Player Jersey keychain!",
                            "Keep yourself on time for every big game when you grab this Tissot Quickster Quartz chronograph. The refreshing look of this watch is the perfect way to look good for the next Los Angeles Lakers match-up without distracting from your fresh look.",
                            "Immerse yourself right in your favorite video game, music or movie while allowing you to display your Lakers logo!"];

        var cookies = loadCookies();
        var detailPageURLAry = [];
        var mainDiv = document.createElement("div");
		
        mainDiv.setAttribute("class", "mainFrame");
      
		document.body.appendChild(mainDiv);

        var url; 
        
        var mainDiv = document.createElement("div");
        mainDiv.setAttribute("class", "mainFrame");

        for(var i=0; i < images.length; i++) {
            
            console.log("image in iteration is " + images[i]);
            console.log("caption in iteration is " + caption[i]);
            console.log("descr in iteration is " + description[i]);
            
            url = "https://s3-us-west-2.amazonaws.com/3110/Phase+6-7+Assignment/" + images[i]; //append to https://s3-us-west-2.amazonaws.com/3110/Phase+3+Assignment/
                var urlDetailPage = "MDetail.html?" + "img=" + url + "&" + "caption=" + caption[i] + "&" + "description=" + description[i];
                var imgDiv = document.createElement("div");
                var imgDiv = document.createElement("div");
                imgDiv.setAttribute("class", "border border-warning");
                var imgInDiv = document.createElement("img");
                imgInDiv.setAttribute("class", "pctImg");
                imgInDiv.setAttribute("src", url);
                var link = document.createElement("a");
                link.setAttribute("href", urlDetailPage);
                link.appendChild(imgInDiv);
                imgDiv.appendChild(link);
                document.body.appendChild(imgDiv);
     
                detailPageURLAry[i] = urlDetailPage;
                
            var cookies = loadCookies();

            var pTitle = document.createElement("p");
            pTitle.setAttribute("class", "center");
            var descriptionI = document.createTextNode(caption[i]);
            pTitle.appendChild(descriptionI);

            var link = document.createElement("a");
            link.setAttribute("href", urlDetailPage);

            var btnDiv = document.createElement("div");
            btnDiv.setAttribute("class", "btnDiv");
           
           var btnUnfav = document.createElement("Button");
            btnUnfav.setAttribute("class", "btn btn-outline-danger");
            btnUnfav.setAttribute("name", i);
            btnUnfav.setAttribute("id", "fav" + i  + i);
            btnUnfav.addEventListener("click", function(){unFavObj(this.name);})
            var q = document.createTextNode("Cancel");
            btnUnfav.appendChild(q);
           
            if (cookies[i] == 0) {
                btnUnfav.setAttribute("disabled", "true");
                
                var btnFav = document.createElement("Button");
                btnFav.setAttribute("class", "btn btn-outline-warning");
                btnFav.setAttribute("name", i);
				idNum = "fav" + i;
                btnFav.setAttribute("id", idNum);
				btnFav.addEventListener("click", function(){favObj(this.name);})
                                
                var t = document.createTextNode("Buy");
				var link2 = link;
                btnFav.appendChild(t);

                btnDiv.appendChild(btnFav);
            } 
            else {
                //btnFav.setAttribute("disabled", "true");
                var icon = document.createElement("img");
                icon.setAttribute("class", "iconImg");
                icon.setAttribute("src", "https://s3-us-west-2.amazonaws.com/3110/Phase+6-7+Assignment/Cart.png");
                
                btnDiv.appendChild(icon);                        
            }

            btnDiv.appendChild(btnUnfav);

            link.appendChild(imgInDiv);
            imgDiv.appendChild(link);

            var bigDiv = document.createElement("div");
            bigDiv.setAttribute("class", "box");

            bigDiv.appendChild(pTitle);
            bigDiv.appendChild(imgDiv);
            bigDiv.appendChild(btnDiv);

            mainDiv.appendChild(bigDiv);		
        }
        
        document.body.appendChild(mainDiv);

        function loadCookies() {
            var cArray = ["", "", "", ""];
            for (var i = 0; i < images.length; i++) {
                if (getCookie("Cookie" + i)) {
                    cArray[i] = 1;
                    console.log(i);
                    console.log(cArray);
                }
                else {
                    cArray[i] = 0;
                    console.log(cArray);
                }
            }
            return cArray;
        }
        function favObj(btnName) {
            var cname = "Cookie" + btnName;
            checkCookie(cname);
            var temp = detailPageURLAry[btnName].replace("favorite=0", "favorite=1");
            console.log(detailPageURLAry[btnName]);
            window.location.href = temp;
        }

        function unFavObj(btnName) {
            var cname = "Cookie" + btnName;
            console.log("Done");
            deleteCookie(cname);
            location.reload();
            console.log("Refresh");
        }

        function setCookie(cname, cvalue, exdays) {
            var d = new Date();
            d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
            var expires = "expires=" + d.toGMTString();
            document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
        }

        function getCookie(cname) {
            var name = cname + "=1";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c == name) {
                    return true;
                }
            }
            return false;
        }

        function checkCookie(cname) {
            var status = getCookie(cname);
            if (status) {
                return true;
            } 
            else {
                    setCookie(cname, 1, .1);
                return false;
            }
        }
            function deleteCookie(cname){
            document.cookie = cname + "=" + 0 + ";expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;";
        }
    </script>
</body>
</html>